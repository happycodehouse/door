<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/resources/css/libraries/swiper-4.5.1.min.css">
    <link rel="stylesheet" href="/resources/css/style.css">
    <title></title>
</head>
<body>
<div class="container prototypes visual ver02">
    <div class="sec sec_intro">
        <div class="row_wrap">
            <div class="row">
                <div class="col-12">
                    <div class="inner">
                        <div class="product_title">
                            <img src="/resources/images/p1/p1-title.png" alt="">
                            <img src="/resources/images/p1/p1-title.svg" alt="">
                        </div>
                        <div class="product_wrap">
                            <div class="swiper product">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <img src="/resources/images/p1/p1-product-black-01.png" alt="" data-product-color="black">
                                        <img src="/resources/images/p1/p1-product-silver-01.png" alt="" data-product-color="silver">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="/resources/images/p1/p1-product-black-02.png" alt="" data-product-color="black">
                                        <img src="/resources/images/p1/p1-product-silver-02.png" alt="" data-product-color="silver">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="/resources/images/p1/p1-product-black-03.png" alt="" data-product-color="black">
                                        <img src="/resources/images/p1/p1-product-silver-03.png" alt="" data-product-color="silver">
                                    </div>
                                </div>
                                <div class="swiper-navigation">
                                    <a href="javascript:void(0);" class="swiper-btn-prev">
                                        <div>
                                            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M16 21L7 12L16 3" stroke="currentColor"></path>
                                            </svg>
                                        </div>
                                    </a>
                                    <a href="javascript:void(0);" class="swiper-btn-next">
                                        <div>
                                            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7 3L16 12L7 21" stroke="currentColor"></path>
                                            </svg>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="product_tab">
                                <a href="javascript:void(0);" class="black active" data-product-tab="black">
                                    <span class="blind">model color: black</span>
                                </a>
                                <a href="javascript:void(0);" class="silver" data-product-tab="silver">
                                    <span class="blind">model color: silver</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="sec_visual ver02">
        <div class="trigger"></div>
        <div class="sticky">
            <div class="box_wrap">
                <div class="row_wrap">
                    <div class="row">
                        <div class="col-10">
                            <div class="desc_box">
                                <div class="desc">
                                    <div class="inner">
                                        <h4>The ultimate vehicle for exploring a city.</h4>
                                        <p>
                                            P1 is a radical new personal electric vehicle,
                                            pairing a cutting edge industrial design with breakthrough performance and utility.
                                            <br>
                                            Batch II is now open for 2025 deliveries in the United States.
                                        </p>
                                    </div>
                                </div>
                                <div class="desc">
                                    <div class="inner">
                                        <h4>The fastest in its class.</h4>
                                        <p>
                                            With 12kW of peak power output, a 55mph top speed, and a 60 mile range, <br>
                                            P1 is the fastest vehicle in its class. <br>
                                            But numbers don't do it justice–riding P1 is a mindblowing experience.
                                        </p>
                                    </div>
                                </div>
                                <div class="desc">
                                    <div class="inner">
                                        <h4>Thoughtful design, inside and out.</h4>
                                        <ul>
                                            <li>
                                                <span>Long Lasting Materials</span>
                                                <p>An anodized aluminum and steel construction provides durability and elegance.</p>
                                            </li>
                                            <li>
                                                <span>Practical Storage</span>
                                                <p>Underseat storage and a front glovebox provide ample storage throughout.</p>
                                            </li>
                                            <li>
                                                <span>High Performance Light</span>
                                                <p>An iconic daytime running light provides visibility and announces P1’s presence.</p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="desc">
                                    <h4>
                                        Next-gen technology for unparalleled safety, theft prevention, and apps on two wheels.</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg_box">
                    <div class="bg_cover bg_cover01">
                        <div class="bg"></div>
                    </div>
                    <div class="bg_cover bg_cover02">
                        <div class="bg"></div>
                    </div>
                    <div class="bg_cover bg_cover03">
                        <div class="bg"></div>
                    </div>
                    <div class="bg_cover bg_cover04">
                        <div class="bg"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="sec sec_charge">
        <div class=" parallax_zone">
            <div class="bg_wrap">
                <div class="bg"></div>
            </div>
            <div class="row_wrap">
                <div class="row">
                    <div class="col-10">
                        <div class="txt_wrap">
                            <div class="charge_head">
                                <p>Charge at home using a regular outlet, <br> and ride for up to 60 miles.</p>
                            </div>
                            <div class="charge_label">
                                <span>Removable 72-Volt 45aH Battery</span>
                                <p>A 3.2 kWh removable battery provides up to 60 miles with real world city riding.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="height: 600vh;"></div>

    <!-- Footer -->
    <footer data-include-path="/views/layout/footer.html"></footer>
    <!-- //Footer -->
</div>
<script src="/resources/js/include.js"></script>
<script src="/resources/js/libraries/gsap.js"></script>
<script src="/resources/js/libraries/jquery-3.4.1.min.js"></script>
<script src="/resources/js/libraries/lenis.min.js"></script>
<script src="/resources/js/libraries/ScrollToPlugin.js"></script>
<script src="/resources/js/libraries/ScrollTrigger.js"></script>
<script src="/resources/js/libraries/swiper4.5.1.js"></script>
<script src="/resources/js/common.js"></script>
<script>
    (function introSection (){
        const $sec01 = $(".sec01");
        const $productTabBtn = $sec01.find(".product_tab a");
        let initColor = $productTabBtn.filter(".active").data("product-tab");
        let productColor = initColor;
        console.log(productColor);

        const sec01Swiper = new Swiper($sec01.find(".swiper"), {
            slidesPerView: "auto",
            navigation: {
                prevEl: '.swiper-btn-prev',
                nextEl: '.swiper-btn-next'
            },
            loop: true
        });

        let $productSlides = $(sec01Swiper.slides);
        let $productSlidesImg = $productSlides.find("img");
        console.log($productSlidesImg);

        function setProductColor (color) {
            $productSlidesImg.each(function () {
                let $img = $(this);
                if ($img.data("product-color") === color) {
                    $img.css("opacity", "1");
                } else {
                    $img.css("opacity", "0");
                }
            });
        }

        setProductColor(initColor);

        function selectColor () {
            let _$this = $(this);
            _$this.addClass("active");
            _$this.siblings("a").removeClass("active");

            productColor = _$this.data("product-tab");
            setProductColor(productColor);
        }

        $productTabBtn.on("click", selectColor);
    })();

    (function visualSection(){
        let secVisualTl;
        const $secVisual = $(".sec_visual");
        const $trigger = $secVisual.find(".trigger");
        const $secVisualDesc = $secVisual.find(".desc");
        const $secVisualBgCover = $secVisual.find(".bg_cover");

        $secVisualDesc.eq(0).addClass("on");
        $secVisualBgCover.eq(0).addClass("on");

        function secVisualMotion(idx) {
            let prevIdx = 0;

            return {
                onStart: () => {
                    console.log('Current Index:', idx);

                    $secVisualDesc.removeClass("on");
                    $secVisualBgCover.removeClass("on");

                    $secVisualDesc.eq(idx).addClass("on");
                    $secVisualBgCover.eq(idx).addClass("on prev");
                    if (idx === 0) {
                        prevIdx = 0;
                    } else {
                        prevIdx = idx - 1;
                    }
                    console.log('Previous Index:', prevIdx);
                },
                onReverseComplete: () => {
                    console.log("역재생 current ", idx);
                    console.log("역재생 prevIdx ", prevIdx);
                    $secVisualDesc.removeClass("on");
                    $secVisualDesc.eq(idx).addClass("on");
                    $secVisualBgCover.eq(prevIdx).addClass("on");
                    $secVisualBgCover.eq(prevIdx).removeClass("prev");
                    $secVisualBgCover.eq(idx).removeClass("prev on");
                    if (prevIdx === 0) {
                        $secVisualBgCover.eq(0).addClass("on");
                    }
                },
                duration: 1,
                ease: "none"
            }
        }

        secVisualTl = gsap.timeline({
            scrollTrigger: {
                trigger: $secVisual,
                start: "top top",
                end: "bottom bottom",
                markers: false,
                scrub: 1,
                invalidateOnRefresh: true
            }
        })
            .to($trigger, {y: 100, duration: 0.5})
            .to($secVisualDesc.eq(0), secVisualMotion(0))
            .to($secVisualDesc.eq(1), secVisualMotion(1))
            .to($secVisualDesc.eq(2), secVisualMotion(2))
            .to($secVisualDesc.eq(3), secVisualMotion(3));
    })();

    (function chargeSection () {
        let chargeSecTl;
        const $secCharge = $(".sec_charge");
        const $secChargeBg = $secCharge.find(".bg_wrap");

        chargeSecTl = gsap.timeline({
            scrollTrigger: {
                trigger: $(".sec_charge"),
                start: "top-=50% top",
                end: "bottom bottom",
                scrub: true,
                markers: true,
                onEnter: () => {
                    $(".product_title").addClass("hide");
                },
                onLeaveBack: () => {
                    $(".product_title").removeClass("hide");
                }
            }
        }).to($secChargeBg, {
            y: "-50%",
            duration: 1,
            ease: "none"
        });
    })();
</script>
</body>
</html>